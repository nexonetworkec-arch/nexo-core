<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexo Admin | Gestión de Contenido</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --kick-green: #53fc18;
            --neon-blue: #00d2ff;
            --bg-dark: #020617;
            --card-bg: #0f172a;
        }
        body {
            background: var(--bg-dark);
            color: white;
            font-family: 'Inter', sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .admin-container {
            width: 100%;
            max-width: 600px;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid var(--neon-blue);
            box-shadow: 0 0 30px rgba(0, 210, 255, 0.2);
            margin: 20px;
        }
        h1 { font-family: 'Orbitron'; font-size: 1.5rem; text-align: center; color: var(--kick-green); margin-bottom: 30px; }
        .section-title { font-family: 'Orbitron'; font-size: 0.9rem; color: var(--neon-blue); margin: 20px 0 10px; border-bottom: 1px solid rgba(0,210,255,0.2); padding-bottom: 5px; }
        
        .form-group { margin-bottom: 15px; }
        label { display: block; font-size: 12px; margin-bottom: 5px; color: #94a3b8; }
        input {
            width: 100%;
            background: #1e293b;
            border: 1px solid #334155;
            padding: 10px;
            border-radius: 8px;
            color: white;
            font-family: 'Inter';
        }
        input:focus { outline: none; border-color: var(--kick-green); }
        
        .btn-save {
            width: 100%;
            background: var(--kick-green);
            color: black;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-weight: 900;
            font-family: 'Orbitron';
            cursor: pointer;
            margin-top: 20px;
            transition: 0.3s;
        }
        .btn-save:hover { filter: brightness(1.2); transform: scale(1.02); }

        /* Login */
        #login-overlay {
            position: fixed; inset: 0; background: var(--bg-dark);
            display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100;
        }
        .login-box { text-align: center; }
        
        .toast {
            position: fixed; bottom: 20px; right: 20px;
            background: var(--kick-green); color: black;
            padding: 10px 20px; border-radius: 8px; font-weight: bold;
            display: none; z-index: 200;
        }
    </style>
</head>
<body>

    <div id="login-overlay">
        <div class="login-box">
            <h1 style="margin-bottom: 10px;">ACCESO PRIVADO</h1>
            <p style="color: #64748b; font-size: 14px; margin-bottom: 20px;">Nexo Network Admin System</p>
            <input type="password" id="admin-pass" placeholder="Contraseña..." style="width: 250px; text-align: center;">
            <button class="btn-save" onclick="checkPass()" style="width: 250px; margin-top: 15px;">ENTRAR</button>
        </div>
    </div>

    <div class="admin-container" id="admin-panel" style="display:none;">
        <h1>PANEL DE CONTROL NEXO</h1>

        <div class="section-title">BANNER IZQUIERDO (AUSPICIA)</div>
        <div class="form-group">
            <label>Imagen URL (Dejar vacío para usar texto)</label>
            <input type="text" id="left-img" placeholder="https://...">
        </div>
        <div class="form-group">
            <label>Texto (Si no hay imagen)</label>
            <input type="text" id="left-text" placeholder="DISPONIBLE">
        </div>
        <div class="form-group">
            <label>URL de Destino</label>
            <input type="text" id="left-url" placeholder="https://...">
        </div>

        <div class="section-title">BANNER DERECHO (PUBLICIDAD)</div>
        <div class="form-group">
            <label>Imagen URL (Dejar vacío para usar texto)</label>
            <input type="text" id="right-img" placeholder="https://...">
        </div>
        <div class="form-group">
            <label>Texto (Si no hay imagen)</label>
            <input type="text" id="right-text" placeholder="PUBLICITA AQUÍ">
        </div>
        <div class="form-group">
            <label>URL de Destino</label>
            <input type="text" id="right-url" placeholder="https://...">
        </div>

        <div class="section-title">TARJETA DE NEGOCIO (SIDEBAR)</div>
        <div class="form-group">
            <label>Nombre del Negocio</label>
            <input type="text" id="biz-name">
        </div>
        <div class="form-group">
            <label>Imagen URL (400x110 aprox)</label>
            <input type="text" id="biz-img">
        </div>
        <div class="form-group">
            <label>Código de Cupón</label>
            <input type="text" id="biz-code">
        </div>
        <div class="form-group">
            <label>URL de Destino</label>
            <input type="text" id="biz-url">
        </div>

        <button class="btn-save" onclick="saveData()">ACTUALIZAR TODO EL SISTEMA</button>
    </div>

    <div id="toast" class="toast">Sincronizado con Firebase ✓</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDfH6atXa_DE5xTuo7T4s1MOiZtP-na9Ew",
            authDomain: "nexonetwork-f4e31.firebaseapp.com",
            databaseURL: "https://nexonetwork-f4e31-default-rtdb.firebaseio.com",
            projectId: "nexonetwork-f4e31",
            storageBucket: "nexonetwork-f4e31.firebasestorage.app",
            messagingSenderId: "241105375532",
            appId: "1:241105375532:web:512c62daaaf15d44a8dc89"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Seguridad Básica
        window.checkPass = () => {
            const pass = document.getElementById('admin-pass').value;
            if(pass === "@Mltsrvcs8102") {
                document.getElementById('login-overlay').style.display = 'none';
                document.getElementById('admin-panel').style.display = 'block';
                loadCurrentData();
            } else {
                alert("Contraseña incorrecta");
            }
        };

        // Cargar datos actuales de Firebase
        async function loadCurrentData() {
            const snapshot = await get(ref(db, 'content'));
            if(snapshot.exists()) {
                const data = snapshot.val();
                if(data.banners) {
                    document.getElementById('left-img').value = data.banners.left?.img || '';
                    document.getElementById('left-text').value = data.banners.left?.text || '';
                    document.getElementById('left-url').value = data.banners.left?.url || '';
                    document.getElementById('right-img').value = data.banners.right?.img || '';
                    document.getElementById('right-text').value = data.banners.right?.text || '';
                    document.getElementById('right-url').value = data.banners.right?.url || '';
                }
                if(data.biz) {
                    document.getElementById('biz-name').value = data.biz.name || '';
                    document.getElementById('biz-img').value = data.biz.img || '';
                    document.getElementById('biz-code').value = data.biz.code || '';
                    document.getElementById('biz-url').value = data.biz.url || '';
                }
            }
        }

        // Guardar datos en Firebase
        window.saveData = () => {
            const updates = {
                banners: {
                    left: {
                        img: document.getElementById('left-img').value,
                        text: document.getElementById('left-text').value,
                        url: document.getElementById('left-url').value
                    },
                    right: {
                        img: document.getElementById('right-img').value,
                        text: document.getElementById('right-text').value,
                        url: document.getElementById('right-url').value
                    }
                },
                biz: {
                    name: document.getElementById('biz-name').value,
                    img: document.getElementById('biz-img').value,
                    code: document.getElementById('biz-code').value,
                    url: document.getElementById('biz-url').value
                }
            };

            set(ref(db, 'content'), updates).then(() => {
                const toast = document.getElementById('toast');
                toast.style.display = 'block';
                setTimeout(() => toast.style.display = 'none', 3000);
            }).catch(err => alert("Error al guardar: " + err));
        };
    </script>
</body>
</html>