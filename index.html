<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>Nexo Network | Versión 4.0 Final</title>

    <meta name="description" content="Nexo Network - Plataforma de Streaming, Videos y Comunidad. Contenido para todo público.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --kick-green: #53fc18;
            --neon-blue: #00d2ff;
            --clapper-red: #ff5a5f;
            --bg-dark: #020617;
            --nav-h: 85px;
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #particleCanvas { position: fixed; inset: 0; z-index: -1; background: radial-gradient(circle at center, #1e293b 0%, #020617 100%); }

        /* --- SPLASH SCREEN --- */
        #splash-screen {
            position: fixed; inset: 0; background: #020617;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 9999; transition: opacity 0.8s cubic-bezier(0.77, 0, 0.175, 1), visibility 0.8s;
        }
        #splash-screen.hidden { opacity: 0; visibility: hidden; }
        .splash-content { text-align: center; width: 100%; max-width: 800px; padding: 20px; }
        .splash-logo { font-family: 'Orbitron'; font-size: clamp(32px, 10vw, 52px); font-weight: 900; letter-spacing: 12px; color: white; margin-bottom: 20px; animation: logoPulse 2s infinite ease-in-out; }
        .logo-n { color: var(--kick-green); }
        .splash-slogan { font-family: 'Inter'; font-size: clamp(14px, 4vw, 20px); letter-spacing: 4px; color: var(--neon-blue); font-weight: 700; text-transform: uppercase; margin-bottom: 10px; }
        .splash-services { font-family: 'Inter'; font-size: clamp(12px, 3.5vw, 18px); letter-spacing: 2px; color: #64748b; margin-bottom: 40px; }
        .loader-bar-container { width: min(350px, 80%); height: 4px; background: rgba(255, 255, 255, 0.05); margin: 0 auto; position: relative; overflow: hidden; border-radius: 4px; }
        .loader-bar { position: absolute; width: 100%; height: 100%; background: var(--kick-green); left: -100%; animation: loadProgress 2.5s forwards cubic-bezier(0.5, 0, 0.2, 1); }
        .loading-status { margin-top: 20px; font-size: 14px; font-family: 'Orbitron'; color: #475569; letter-spacing: 4px; transition: color 0.3s; }
        
        @keyframes logoPulse { 0%, 100% { transform: scale(1); filter: blur(0px); } 50% { transform: scale(0.98); filter: blur(1px); } }
        @keyframes loadProgress { 0% { left: -100%; } 100% { left: 0%; } }

        /* --- UI BASE --- */
        * { box-sizing: border-box; text-decoration: none !important; -webkit-tap-highlight-color: transparent; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100vh; color: white; font-family: 'Inter', sans-serif; overflow: hidden; display: flex; flex-direction: column; }

        /* --- BARRA SOCIAL (RESTAURADA ORIGINAL) --- */
        .social-bar { height: var(--nav-h); background: rgba(2, 6, 23, 0.85); backdrop-filter: blur(15px); display: flex; justify-content: center; align-items: center; gap: 8px; border-bottom: 1px solid rgba(255, 255, 255, 0.08); z-index: 1000; padding: 0 15px; flex-shrink: 0; }
        .social-bar a { color: #94a3b8; font-size: 20px; width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; border-radius: 12px; transition: var(--transition); background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.05); cursor: pointer; }
        .social-bar a:hover { transform: translateY(-5px); color: white; background: rgba(255, 255, 255, 0.1); border-color: rgba(255,255,255,0.2); }
        .btn-business { font-size: 24px !important; color: var(--neon-blue) !important; }
        .nav-divider { width: 1px; height: 28px; background: rgba(255, 255, 255, 0.15); margin: 0 5px; }

        /* --- CONTENEDOR CENTRAL --- */
        .page-wrapper { flex: 1; display: flex; align-items: center; justify-content: center; padding: 20px; gap: 25px; position: relative; z-index: 500; width: 100%; max-width: 1400px; margin: 0 auto; }
        .side-banner { width: 170px; height: 450px; flex-shrink: 0; display: none; }
        .video-box { flex: 1; width: 100%; max-width: 900px; padding: 3px; border-radius: 20px; }
        .video-aspect { width: 100%; padding-top: 56.25%; position: relative; background: #000; border-radius: 17px; overflow: hidden; }
        .video-aspect iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: none; }

        @media (min-width: 1200px) { .side-banner { display: block; } }

        /* --- TARJETAS --- */
        .biz-card-wrapper { padding: 2px; border-radius: 14px; transition: var(--transition); background: linear-gradient(90deg, var(--kick-green), var(--neon-blue), var(--kick-green)); background-size: 200% 200%; animation: moveGradient 4s linear infinite; }
        .biz-card-wrapper:hover { transform: translateY(-8px); box-shadow: 0 15px 30px rgba(83, 252, 24, 0.2); }
        @keyframes moveGradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .biz-card { background: #0f172a; border-radius: 12px; padding: 15px; text-align: center; height: 100%; position: relative; overflow: hidden; }
        .btn-cta { background: var(--kick-green); color: black !important; border: none; padding: 12px; border-radius: 10px; font-weight: 900; width: 100%; cursor: pointer; font-family: 'Orbitron'; font-size: 11px; }

        /* --- SIDEBAR & MODALES --- */
        #businessSidebar { position: fixed; left: -350px; top: 0; width: 320px; height: 100%; background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(20px); z-index: 3000; transition: 0.5s; border-right: 2px solid var(--neon-blue); padding: 25px; overflow-y: auto; }
        #businessSidebar.active { left: 0; }
        .sidebar-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); display: none; z-index: 2999; backdrop-filter: blur(4px); }
        .sidebar-overlay.active { display: block; }
        
        .modal-overlay { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(12px); display: none; justify-content: center; align-items: center; z-index: 4000; transition: 0.3s; }
        .modal-overlay.active { display: flex; }
        .modal-content { width: 90%; max-width: 350px; transform: scale(0.8); transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .modal-overlay.active .modal-content { transform: scale(1); }

        .footer-credits { height: 45px; background: rgba(2, 6, 23, 0.9); backdrop-filter: blur(10px); display: flex; align-items: center; justify-content: center; font-size: 10px; color: #64748b; border-top: 1px solid rgba(255, 255, 255, 0.05); }
        #toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(100px); background: var(--kick-green); color: black; padding: 12px 25px; border-radius: 50px; font-weight: 900; font-family: 'Orbitron'; transition: 0.5s; z-index: 10000; }
        #toast.show { transform: translateX(-50%) translateY(0); }
        .banner-img { width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; display: none; }
    </style>
</head>
<body>

    <canvas id="particleCanvas"></canvas>

    <div id="splash-screen">
        <div class="splash-content">
            <div class="splash-logo"><span class="logo-n">N</span>EXO <span class="logo-n">N</span>ETWORK</div>
            <div class="splash-slogan">CONTENIDO PARA TODO PÚBLICO</div>
            <div class="splash-services">Streaming • Videos • Comunidad</div>
            <div class="loader-bar-container"><div class="loader-bar"></div></div>
            <div class="loading-status">INICIALIZANDO SISTEMA...</div>
        </div>
    </div>

    <nav class="social-bar">
        <a onclick="toggleSidebar()" class="btn-business"><i class="fa-solid fa-shop"></i></a>
        <div class="nav-divider"></div>
        <a onclick="openModal('contactModal')" style="color:var(--neon-blue)"><i class="fa-solid fa-envelope"></i></a>
        <a href="https://www.tiktok.com/@nexonetwork.ec" target="_blank"><i class="fab fa-tiktok"></i></a>
        <a href="https://kick.com/nexonetwork" target="_blank" style="color:var(--kick-green)"><i class="fa-solid fa-k"></i></a>
        <a href="https://www.facebook.com/nexonetwork.ec" target="_blank"><i class="fab fa-facebook"></i></a>
        <a href="https://clapperapp.com/NexoNetwork" target="_blank" style="color:var(--clapper-red)"><i class="fa-solid fa-clapperboard"></i></a>
        <a href="https://t.me/nexonetworkec" target="_blank"><i class="fab fa-telegram"></i></a>
        <a href="https://www.youtube.com/@nexonetworkec" target="_blank"><i class="fab fa-youtube"></i></a>
        <div class="nav-divider"></div>
        <a onclick="openModal('shareModal')" style="color:var(--neon-blue)"><i class="fa-solid fa-share-nodes"></i></a>
    </nav>

    <div class="page-wrapper">
        <div class="side-banner biz-card-wrapper">
            <a id="link-left" href="#" target="_blank" style="display:block; height:100%;">
                <div class="biz-card">
                    <p style="font-size:11px; color:var(--neon-blue); font-family:'Orbitron'; position:relative; z-index:2;">AUSPICIA</p>
                    <div id="container-left" style="height:80%; border:1px dashed rgba(255,255,255,0.1); border-radius:10px; display:flex; align-items:center; justify-content:center; overflow:hidden; position:relative;">
                        <span id="text-left" style="color:#475569; font-size:12px; font-family:'Orbitron';">DISPONIBLE</span>
                        <img id="img-left" class="banner-img" src="">
                    </div>
                </div>
            </a>
        </div>

        <div class="video-box biz-card-wrapper">
            <div class="video-aspect">
                <iframe src="https://player.kick.com/nexonetwork" allowfullscreen="true"></iframe>
            </div>
        </div>

        <div class="side-banner biz-card-wrapper">
            <a id="link-right" href="#" target="_blank" style="display:block; height:100%;">
                <div class="biz-card">
                    <p style="font-size:11px; color:var(--kick-green); font-family:'Orbitron'; position:relative; z-index:2;">PUBLICIDAD</p>
                    <div id="container-right" style="height:80%; border:1px dashed rgba(255,255,255,0.1); border-radius:10px; display:flex; align-items:center; justify-content:center; overflow:hidden; position:relative;">
                        <span id="text-right" style="color:#475569; font-size:12px; font-family:'Orbitron';">DISPONIBLE</span>
                        <img id="img-right" class="banner-img" src="">
                    </div>
                </div>
            </a>
        </div>
    </div>

    <footer class="footer-credits">
        <div>© <span id="currentYear"></span> <b>NEXO NETWORK</b> | EL ORO - ECUADOR</div>
    </footer>

    <div class="modal-overlay" id="contactModal" onclick="closeModals()">
        <div class="modal-content biz-card-wrapper" onclick="event.stopPropagation()">
            <div class="biz-card">
                <h3 style="color:var(--kick-green); font-family:'Orbitron';">CONTACTO</h3>
                <p style="color:#94a3b8; font-size:14px; margin-bottom: 20px;">nexonetwork.ec@gmail.com</p>
                <button class="btn-cta" onclick="handleContactCopy()">COPIAR CORREO</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="shareModal" onclick="closeModals()">
        <div class="modal-content biz-card-wrapper" onclick="event.stopPropagation()">
            <div class="biz-card">
                <h3 style="color:var(--neon-blue); font-family:'Orbitron';">COMPARTIR</h3>
                <p style="color:#94a3b8; font-size:12px; margin-bottom: 20px;">Copia el enlace de la página</p>
                <button class="btn-cta" onclick="handleShareCopy()">COPIAR ENLACE</button>
            </div>
        </div>
    </div>

    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
    <aside id="businessSidebar">
        <h2 style="font-family:'Orbitron'; color:var(--neon-blue); font-size:14px; margin-bottom:25px; border-bottom:1px solid rgba(0,210,255,0.1); padding-bottom:10px;">NEGOCIOS LOCALES</h2>
        <div id="businesses-container"></div>
    </aside>

    <div id="toast">Copiado</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyDfH6atXa_DE5xTuo7T4s1MOiZtP-na9Ew",
            authDomain: "nexonetwork-f4e31.firebaseapp.com",
            databaseURL: "https://nexonetwork-f4e31-default-rtdb.firebaseio.com",
            projectId: "nexonetwork-f4e31",
            storageBucket: "nexonetwork-f4e31.firebasestorage.app",
            messagingSenderId: "241105375532",
            appId: "1:241105375532:web:512c62daaaf15d44a8dc89"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // --- SISTEMA DINÁMICO ---
        onValue(ref(db, 'content/banners'), (snap) => {
            const data = snap.val();
            if(data) {
                ['left', 'right'].forEach(side => {
                    const c = data[side];
                    if(c) {
                        document.getElementById(`link-${side}`).href = c.url || "#";
                        const img = document.getElementById(`img-${side}`);
                        const txt = document.getElementById(`text-${side}`);
                        if(c.img) { img.src = c.img; img.style.display="block"; txt.style.display="none"; }
                        else { txt.innerText = c.text || "DISPONIBLE"; txt.style.display="block"; img.style.display="none"; }
                    }
                });
            }
        });

        onValue(ref(db, 'content/businesses'), (snap) => {
            const container = document.getElementById('businesses-container');
            container.innerHTML = "";
            const data = snap.val();
            if(data) {
                Object.values(data).forEach(biz => {
                    container.innerHTML += `
                        <div class="biz-card-wrapper" style="margin-bottom:20px;">
                            <a href="${biz.url || '#'}" target="_blank" style="display:block;">
                                <div class="biz-card">
                                    <img src="${biz.img}" style="width:100%; height:110px; object-fit:cover; border-radius:8px; margin-bottom:12px;">
                                    <h4 style="margin:10px 0; font-family:'Orbitron'; font-size:14px; color:white;">${biz.name}</h4>
                                    <button class="btn-cta" onclick="event.preventDefault(); window.copyAction('${biz.code}', '¡Cupón Copiado!')">CUPÓN: ${biz.code}</button>
                                </div>
                            </a>
                        </div>
                    `;
                });
            }
        });

        // --- FUNCIONES CORE ---
        window.toggleSidebar = () => {
            document.getElementById('businessSidebar').classList.toggle('active');
            document.getElementById('sidebarOverlay').classList.toggle('active');
        };
        window.openModal = (id) => document.getElementById(id).classList.add('active');
        window.closeModals = () => document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('active'));
        window.showToast = (msg) => {
            const t = document.getElementById('toast'); t.innerText = msg;
            t.classList.add('show'); setTimeout(() => t.classList.remove('show'), 2000);
        };
        window.copyAction = (txt, msg) => navigator.clipboard.writeText(txt).then(() => showToast(msg));
        
        window.handleContactCopy = () => {
            navigator.clipboard.writeText("nexonetwork.ec@gmail.com").then(() => {
                showToast("¡Correo Copiado!");
                closeModals();
            });
        };
        window.handleShareCopy = () => {
            navigator.clipboard.writeText(window.location.href).then(() => {
                showToast("¡Enlace Copiado!");
                closeModals();
            });
        };

        // Partículas
        const canvas = document.getElementById('particleCanvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function initP() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            particles = []; for(let i=0; i<80; i++) particles.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, s:Math.random()*3+1, o:Math.random()*0.5+0.3});
        }
        function drawP() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            particles.forEach(p => { p.y -= 0.4; if(p.y<0) p.y=canvas.height; ctx.beginPath(); ctx.fillStyle=`rgba(255,255,255,${p.o})`; ctx.arc(p.x,p.y,p.s,0,Math.PI*2); ctx.fill(); });
            requestAnimationFrame(drawP);
        }

        window.addEventListener('load', () => {
            initP(); drawP();
            document.getElementById('currentYear').innerText = new Date().getFullYear();
            setTimeout(() => document.getElementById('splash-screen').classList.add('hidden'), 2500);
        });
        window.addEventListener('resize', initP);
    </script>
</body>
</html>